{% extends "base.html" %}
{% load static %}
{% block title %}Password Reset Complete{% endblock %}

{% block content %}
  
<main style="padding-top: 70px; min-height: calc(100vh - 120px);">
    <div style="max-width: 450px; margin: 80px auto; padding: 50px 30px; background: #ffffff; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); text-align: center; font-family: 'Segoe UI', system-ui, sans-serif; border: 1px solid #f0f0f0; position: relative;">
    
        <!-- Success Animation -->
        <div style="width: 100px; height: 100px; background: linear-gradient(135deg, #27ae60, #2ecc71); border-radius: 50%; margin: 0 auto 30px; display: flex; align-items: center; justify-content: center; border: 4px solid #d5f4e6; animation: bounce 0.6s ease-out;">
            <svg style="width: 50px; height: 50px; color: white;" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
            </svg>
        </div>
        
        <!-- Confetti Effect -->
        <div id="confettiContainer" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden; border-radius: 20px;"></div>
        
        <!-- Title -->
        <h2 style="margin: 0 0 15px 0; font-size: 32px; font-weight: 800; color: #2c3e50; line-height: 1.2; background: linear-gradient(135deg, #27ae60, #2ecc71); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            Password Reset Successful!
        </h2>
        
        <!-- Message -->
        <p style="color: #5a6c7d; font-size: 17px; line-height: 1.6; margin: 0 0 35px 0; padding: 0 10px;">
            Your password has been successfully updated. You can now log in with your new password.
        </p>
        
        <!-- Login Button -->
        <a href="{% url 'user_login' %}" id="loginBtn" style="display: inline-block; padding: 16px 45px; background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; text-decoration: none; border-radius: 12px; font-weight: 700; font-size: 17px; transition: all 0.3s; border: none; cursor: pointer; box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4); position: relative; overflow: hidden;">
            <span style="position: relative; z-index: 2;">Log In Now</span>
            <div style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s;"></div>
        </a>
        
        <!-- Security Note -->
        <div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #27ae60;">
            <p style="color: #6c757d; font-size: 14px; margin: 0; line-height: 1.5;">
                <strong>ðŸ”’ Security Tip:</strong> Use a strong, unique password and consider enabling two-factor authentication for added security.
            </p>
        </div>
        
        <!-- Redirect Timer -->
        <div style="margin-top: 20px;">
            <p style="color: #8795a7; font-size: 14px; margin: 0;">
                Redirecting to login in <span id="countdown" style="font-weight: 700; color: #27ae60;">5</span> seconds...
            </p>
        </div>
    </div>

    <style>
        @keyframes bounce {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.1); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
    </style>

    <script>
        // Button hover effects
        const loginBtn = document.getElementById('loginBtn');
        
        loginBtn.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 8px 25px rgba(39, 174, 96, 0.5)';
            this.querySelector('div').style.left = '100%';
            this.querySelector('div').style.animation = 'shine 0.5s ease-out';
        });
        
        loginBtn.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 6px 20px rgba(39, 174, 96, 0.4)';
        });
        
        loginBtn.addEventListener('mousedown', function() {
            this.style.transform = 'translateY(-1px)';
        });
        
        // Confetti effect
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#27ae60', '#2ecc71', '#3498db', '#9b59b6', '#e74c3c', '#f39c12', '#1abc9c'];
            
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'absolute';
                confetti.style.width = '8px';
                confetti.style.height = '8px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = '50%';
                confetti.style.top = '50%';
                confetti.style.left = '50%';
                confetti.style.opacity = '0';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 50 + Math.random() * 100;
                const duration = 1 + Math.random() * 1;
                
                confetti.style.animation = `
                    confettiFall ${duration}s ease-out forwards,
                    confettiFade ${duration}s ease-in forwards
                `;
                
                confetti.style.setProperty('--end-x', Math.cos(angle) * distance + 'px');
                confetti.style.setProperty('--end-y', Math.sin(angle) * distance + 'px');
                
                container.appendChild(confetti);
            }
        }
        
        // Add confetti styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                0% {
                    transform: translate(0, 0) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translate(var(--end-x), var(--end-y)) rotate(360deg);
                    opacity: 0;
                }
            }
            
            @keyframes confettiFade {
                0% { opacity: 1; }
                70% { opacity: 1; }
                100% { opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Trigger confetti after a short delay
        setTimeout(createConfetti, 300);
        
        // Auto redirect countdown
        let countdown = 5;
        const countdownElement = document.getElementById('countdown');
        const countdownInterval = setInterval(() => {
            countdown--;
            countdownElement.textContent = countdown;
            
            if (countdown <= 0) {
                clearInterval(countdownInterval);
                window.location.href = "{% url 'login' %}";
            }
        }, 1000);
        
        // Stop countdown if user interacts
        loginBtn.addEventListener('click', () => {
            clearInterval(countdownInterval);
        });
    </script>
</main>    
{% endblock %}
