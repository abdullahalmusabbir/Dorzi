{% extends "base.html" %}
{% load static %}
{% block title %}{% endblock %}

{% block content %}
  
<main>
        <!-- Hero Section -->
        <section style="position: relative; width: 100%; height: 100vh; overflow: hidden; display: flex; align-items: center; justify-content: center;">

            <!-- Slideshow Images -->
            <div id="slideshow-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;">
                <img src="{% static 'images/(1).jpg' %}" class="slide-image active" style="position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 1; transition: opacity 1s ease-in-out;">
                <img src="{% static 'images/(2).jpg' %}" class="slide-image" style="position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 1s ease-in-out;">
                <img src="{% static 'images/(3).jpg' %}" class="slide-image" style="position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 1s ease-in-out;">
            </div>
        
            <!-- Overlay Content -->
            <div style="position: relative; z-index: 1; text-align: center; max-width: 700px; padding: 20px;">
                <h1 style="font-size: 48px; font-weight: 800; color: white; margin-bottom: 20px; line-height: 1.2;">
                    Find the Perfect <br>
                    <span style="color: #c7d2fe;">Tailor Near You</span>
                </h1>
                <p style="font-size: 18px; color: #f1f5f9; margin-bottom: 30px;">
                    Connect with expert tailors in Bangladesh for custom-made clothing and ready-to-wear collections.
                    Get the perfect fit for your style.
                </p>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <a href="{% url 'findTailor' %}" style="background-color:rgba(7, 37, 227, 1); color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-size: 16px;">Find Tailors</a>
                    <a href="{% url 'findTailor' %}" style="background-color: #ffffffff; color:rgba(0, 0, 0, 1); padding: 12px 24px; border-radius: 8px; text-decoration: none; font-size: 16px;">Custom Order</a>
                </div>
            </div>
        
            <!-- Slideshow Script -->
            <script>
                const slides = document.querySelectorAll(".slide-image");
                let index = 0;
        
                setInterval(() => {
                    slides[index].style.opacity = 0;
                    slides[index].classList.remove("active");
                    index = (index + 1) % slides.length;
                    slides[index].style.opacity = 1;
                    slides[index].classList.add("active");
                }, 4000);
            </script>
        </section>

        {% comment %} about order {% endcomment %}

        <section style="padding: 60px 5%; background-color: #f9fafb; font-family: 'Segoe UI', sans-serif;">
            <!-- Heading -->
            <div style="text-align: center; margin-bottom: 50px;">
                <h2 style="font-size: 32px; font-weight: 700; color: #111827;">Our Services</h2>
                <p style="font-size: 16px; color: #6b7280;">From finding the perfect tailor to tracking your order, we make the entire<br>tailoring process seamless and transparent.</p>
            </div>

            <!-- Cards Container -->
            <div style="display: flex; flex-wrap: wrap; gap: 30px; justify-content: space-between;">

                <!-- Card 1 -->
                <div style="flex: 1; min-width: 220px; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); text-align: left;">
                <div style="margin-bottom: 20px;">
                    <img src="{% static 'images/9.png' %}" alt="" style="border-radius: 8px;width: 60px; height: 60px; object-fit: contain;"> <!-- Add your image link here -->
                </div>
                <h3 style="margin-top: 15px; font-size: 18px; font-weight: 600; color: #1f2937;">Find Expert Tailors</h3>
                <p style="font-size: 14px; color: #4b5563;">Search for tailors by location, specialization, and pricing. View profiles, reviews, and portfolios.</p>
                <a href="{% url 'findTailor' %}" style="color: #2563eb; font-size: 14px; text-decoration: none;">Learn More ‚Üí</a>
                </div>

                <!-- Card 2 -->
                <div style="flex: 1; min-width: 220px; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); text-align: left;">
                <div style="margin-bottom: 20px;">
                    <img src="{% static 'images/10.png' %}" alt="Find Tailors Icon" style="border-radius: 8px; width: 60px; height: 60px; object-fit: contain;"> <!-- Add your image link here -->
                </div>
                <h3 style="margin-top: 15px; font-size: 18px; font-weight: 600; color: #1f2937;">Custom Clothing</h3>
                <p style="font-size: 14px; color: #4b5563;">Order custom-made traditional wear like panjabi, salwar kameez, shirts, and formal wear.</p>
                <a href="{% url 'pre_designed'%}" style="color: #2563eb; font-size: 14px; text-decoration: none;">Learn More ‚Üí</a>
                </div>

                <!-- Card 3 -->
                <div style="flex: 1; min-width: 220px; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); text-align: left;">
                <div style="margin-bottom: 20px;">
                    <img src="{% static 'images/11.png' %}" alt="Find Tailors Icon" style="border-radius: 8px; width: 60px; height: 60px; object-fit: contain;"> <!-- Add your image link here -->
                </div>
                <h3 style="margin-top: 15px; font-size: 18px; font-weight: 600; color: #1f2937;">Pre-Designed Collections</h3>
                <p style="font-size: 14px; color: #4b5563;">Browse ready-made designs and place orders for quick delivery with professional tailoring.</p>
                <a href="{% url 'pre_designed'%}" style="color: #2563eb; font-size: 14px; text-decoration: none;">Learn More ‚Üí</a>
                </div>

                <!-- Card 4 -->
                <div style="flex: 1; min-width: 220px; background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); text-align: left;">
                <div style="margin-bottom: 20px;">
                    <img src="{% static 'images/12.png' %}" alt="Find Tailors Icon" style="border-radius: 8px; width: 60px; height: 60px; object-fit: contain;"> <!-- Add your image link here -->
                </div>
                <h3 style="margin-top: 15px; font-size: 18px; font-weight: 600; color: #1f2937;">Order Tracking</h3>
                <p style="font-size: 14px; color: #4b5563;">Track your order progress in real-time from measurement to delivery with updates.</p>
                <a href="" style="color: #2563eb; font-size: 14px; text-decoration: none;">Learn More ‚Üí</a>
                </div>

            </div>
        </section>


{% comment %} product List  {% endcomment %}
        <h1 style="color: #1f1f1f; text-align: center; font-size: 32px; font-weight: bold; ">
            Featured Tailors
        </h1>
        <p style="text-align: center;font-size: 20px; color: #6b7280;">Meet some of our top-rated tailors who deliver exceptional quality and<br>service to customers across Bangladesh.</p>
        <section style="display: flex; flex-wrap: wrap; gap: 20px; padding: 50px 150px;justify-content: center;">
            
            {% for tailor in tailors %}
                    {% if tailor.user.id != user.id %}
                        <div class="tailor-card" data-rating="{{ tailor.rating|default:'0' }}" data-price="{{ tailor.price|default:'0' }}" data-location="{{ tailor.business_location }}" data-category="{{ tailor.category }}" style="background-color: #ffffff; border: 1px solid #ccc; border-radius: 10px; width: 300px; margin: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); overflow: hidden;">
                        
                            
                            <!-- Profile Picture as the main image -->
                            <div style="position: relative; height: 180px; overflow: hidden; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
                                {% if tailor.profile_picture %}
                                    <img src="{{ tailor.profile_picture.url }}" alt="Profile Picture" style="width: 100%; height: 100%; object-fit: cover;">
                                {% else %}
                                    <img src="{% static 'images/default-profile.jpg' %}" alt="Default Picture" style="width: 100%; height: 100%; object-fit: cover;">
                                {% endif %}
                                
                                <!-- Rating Badge -->
                                <div style="position: absolute; top: 12px; right: 12px; background: rgba(255,255,255,0.9); padding: 4px 8px; border-radius: 20px; font-weight: bold; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
                                    ‚≠ê {{ tailor.rating|default:"0" }}
                                </div>
                                
                                <!-- Location Badge -->
                                <div style="position: absolute; bottom: 12px; left: 12px; background: rgba(255,255,255,0.9); padding: 4px 8px; border-radius: 20px; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
                                    <i class="fas fa-map-marker-alt" style="margin-right: 4px; color: #7eb6fa;"></i> {{ tailor.business_location|truncatewords:2 }}
                                </div>
                            </div>
                            
                            <!-- Content with Info -->
                            <div style="padding: 16px; text-align: left;">
                                <h3 style="margin: 0 0 8px 0; font-size: 18px; color: #0a2342; font-weight: 700;">{{ tailor.user.first_name }} {{ tailor.user.last_name }}</h3>
                                
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <div style="width: 24px; height: 24px; background: #f0f5ff; border-radius: 6px; display: flex; align-items: center; justify-content: center; margin-right: 8px;">
                                        <i class="fas fa-tag" style="color: #194afb; font-size: 12px;"></i>
                                    </div>
                                    <p style="margin: 0; font-size: 14px; color: #4a5568;">{{ tailor.get_category_display }}</p>
                                </div>
                                
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <div style="width: 24px; height: 24px; background: #f0f5ff; border-radius: 6px; display: flex; align-items: center; justify-content: center; margin-right: 8px;">
                                        <i class="fas fa-briefcase" style="color: #194afb; font-size: 12px;"></i>
                                    </div>
                                    <p style="margin: 0; font-size: 14px; color: #4a5568;">{{ tailor.expertise }} level</p>
                                </div>
                                
                                <div style="display: flex; align-items: center; margin-bottom: 16px;">
                                    <div style="width: 24px; height: 24px; background: #f0f5ff; border-radius: 6px; display: flex; align-items: center; justify-content: center; margin-right: 8px;">
                                        <i class="fas fa-money-bill-wave" style="color: #194afb; font-size: 12px;"></i>
                                    </div>
                                    <p style="margin: 0; font-size: 14px; color: #4a5568; font-weight: 600;">Starts from ‡ß≥{{ tailor.price|default:"N/A" }}</p>
                                </div>

                                {% if user.is_authenticated %}
                                <button class="open-modal-btn"
                                    data-id="{{ tailor.id }}"
                                    data-url="{% url 'create_custom_orders' tailor.id %}"
                                    data-name="{{ tailor.user.first_name }} {{ tailor.user.last_name }}"
                                    data-image="{% if tailor.profile_picture %}{{ tailor.profile_picture.url }}{% else %}{% static 'images/default-profile.jpg' %}{% endif %}"
                                    data-shop="{{ tailor.business_name }}"
                                    data-expertise="{{ tailor.expertise_details }}"
                                    data-location="{{ tailor.business_location }}"
                                    data-rating="{{ tailor.rating|default:'N/A' }}"
                                    {% comment %} data-url="{% url 'createtorder' user.id tailor.id %}" {% endcomment %}
                                    style="width: 100%; padding: 10px; background-color: #194afb; color: white; text-decoration: none; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: background-color 0.2s;">
                                    View Profile
                                </button>

                                    <!-- Modal -->
                                    <div id="hireModal" 
                                        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 9999; font-family: 'Arial', sans-serif;">

                                        <div style="background: #fff; padding: 30px; border-radius: 8px; width: 700px; max-width: 95%; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.2); max-height: 90vh; overflow-y: auto;">

                                            <!-- Close Button -->
                                            <span id="closeModal" 
                                                style="position: absolute; top: 15px; right: 20px; cursor: pointer; font-size: 24px; color: #888; font-weight: bold;">
                                                ‚úñ
                                            </span>

                                            <!-- Modal Title -->
                                            <h3 id="modalTitle" style="font-size: 26px; color: #333; margin-bottom: 20px; font-weight: 700;">Order Tailor</h3>

                                            <!-- Tailor Information Section -->
                                            <div id="tailorInfo" style="margin-bottom: 25px; color: #555; display: flex; gap: 20px;">




                                            <!-- Left Side - Profile Picture -->
                                            <div style="flex: 0 0 150px;">
                                                <img id="tailorImage" src="{{ tailor.profile_picture.url }}" alt="Profile Picture"
                                                    style="width: 150px; height: 200px; border-radius: 10px; object-fit: cover; border: 2px solid #eee; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                            </div>
                                            
                                            <!-- Right Side - Details -->
                                            <div style="flex: 1;">
                                                <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                                                    <!-- Column 1 -->
                                                    <div>
                                                        <p style="margin: 5px 0; display: flex; align-items: center;">
                                                            <i class="fas fa-user" style="margin-right: 8px; color: #666; width: 20px;"></i>
                                                            <strong>Name: </strong>
                                                            <span id="tailorName" style="margin-left: 5px;">{{ tailor.user.first_name }} {{ tailor.user.last_name }}</span>
                                                        </p>
                                                        <p style="margin: 5px 0; display: flex; align-items: center;">
                                                            <i class="fas fa-store" style="margin-right: 8px; color: #666; width: 20px;"></i>
                                                            <strong>Shop: </strong>
                                                            <span id="tailorshopname" style="margin-left: 5px;">{{ tailor.business_name }}</span>
                                                        </p>
                                                    </div>
                                                    
                                                    <!-- Column 2 -->
                                                    <div>
                                                        <p style="margin: 5px 0; display: flex; align-items: center;">
                                                            <i class="fas fa-map-marker-alt" style="margin-right: 8px; color: #666; width: 20px;"></i>
                                                            <strong>Location: </strong>
                                                            <span id="tailorLocation" style="margin-left: 5px;">{{ tailor.business_location }}</span>
                                                        </p>
                                                        <p style="margin: 5px 0; display: flex; align-items: center;">
                                                            <i class="fas fa-star" style="margin-right: 8px; color: #666; width: 20px;"></i>
                                                            <strong>Rating: </strong>
                                                            <span id="tailorRating" style="margin-left: 5px;">{{ tailor.rating|default:"N/A" }} ‚≠ê</span>
                                                        </p>
                                                    </div>
                                                    
                                                    <!-- Column 3 -->
                                                    <div>
                                                        <p style="margin: 5px 0; display: flex; align-items: center;">
                                                            <i class="fas fa-briefcase" style="margin-right: 8px; color: #666; width: 20px;"></i>
                                                            <strong>Experience: </strong>
                                                            <span style="margin-left: 5px;">{{ tailor.expertise }} level</span>
                                                        </p>
                                                        <p style="margin: 5px 0; display: flex; align-items: center;">
                                                            <i class="fas fa-tag" style="margin-right: 8px; color: #666; width: 20px;"></i>
                                                            <strong>Starts from: </strong>
                                                            <span style="margin-left: 5px;">‡ß≥{{ tailor.price|default:"N/A" }}</span>
                                                        </p>
                                                    </div>
                                                </div>
                                                
                                                <!-- Services Offered -->
                                                <div style="margin-top: 15px;">
                                                    <h4 style="margin-bottom: 8px; color: #333; border-bottom: 1px solid #eee; padding-bottom: 5px;">
                                                        <i class="fas fa-list" style="margin-right: 8px;"></i>Services Offered
                                                    </h4>
                                                    <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                                                        {% for service in tailor.services_offered.splitlines %}
                                                            <span style="background: #f0f5ff; color: #194afb; padding: 4px 10px; border-radius: 15px; font-size: 14px;">
                                                                {{ service }}
                                                            </span>
                                                        {% endfor %}
                                                    </div>

                                                    <div class="favorite-icon" 
                                                        style=" top: 16px; right: 16px; cursor: pointer; font-size: 24px; color: {% if tailor.id in favorite_tailor_ids %} #e74c3c {% else %} #ccc {% endif %}; transition: all 0.3s ease;" 
                                                        data-tailor-id="{{ tailor.id }}" 
                                                        onclick="toggleFavorite(this)">
                                                        {% if tailor.id in favorite_tailor_ids %}‚ô•{% else %}‚ô°{% endif %}
                                                    </div>

                                                    <script>
                                                        function toggleFavorite(icon) {
                                                            const tailorId = icon.getAttribute('data-tailor-id');
                                                            const isCurrentlyFilled = icon.style.color === 'rgb(231, 76, 60)';
                                                            
                                                            // Toggle the visual state immediately for better UX
                                                            if (isCurrentlyFilled) {
                                                                icon.style.color = '#ccc';
                                                                icon.textContent = '‚ô°';
                                                            } else {
                                                                icon.style.color = '#e74c3c';
                                                                icon.textContent = '‚ô•';
                                                            }
                                                            
                                                            // Send AJAX request to the server
                                                            fetch(`/favorites/toggle/${tailorId}/`, {
                                                                method: 'POST',
                                                                headers: {
                                                                    'X-CSRFToken': getCookie('csrftoken'),
                                                                    'Content-Type': 'application/json',
                                                                },
                                                            })
                                                            .then(response => {
                                                                if (!response.ok) {
                                                                    // If the request failed, revert the visual state
                                                                    if (isCurrentlyFilled) {
                                                                        icon.style.color = '#e74c3c';
                                                                        icon.textContent = '‚ô•';
                                                                    } else {
                                                                        icon.style.color = '#ccc';
                                                                        icon.textContent = '‚ô°';
                                                                    }
                                                                    
                                                                    // Check if it's an authentication error
                                                                    if (response.status === 401) {
                                                                        alert('Please log in to add favorites');
                                                                    } else {
                                                                        alert('Failed to update favorite status');
                                                                    }
                                                                    throw new Error('Failed to update favorite status');
                                                                }
                                                                return response.json();
                                                            })
                                                            .then(data => {
                                                                console.log('Favorite status updated:', data);
                                                            })
                                                            .catch(error => {
                                                                console.error('Error:', error);
                                                            });
                                                        }

                                                        // Function to get CSRF token from cookies
                                                        function getCookie(name) {
                                                            let cookieValue = null;
                                                            if (document.cookie && document.cookie !== '') {
                                                                const cookies = document.cookie.split(';');
                                                                for (let i = 0; i < cookies.length; i++) {
                                                                    const cookie = cookies[i].trim();
                                                                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                                                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                                                        break;
                                                                    }
                                                                }
                                                            }
                                                            return cookieValue;
                                                        }
                                                    </script>


                                                </div>
                                            </div>
                                        </div>

                                        <!-- Navigation Tabs -->
                                        <div style="margin: 20px 0; border-bottom: 1px solid #eee;">
                                            <button class="tab-btn active" data-tab="about" style="padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: bold; color: #194afb; border-bottom: 2px solid #194afb;">About</button>
                                            <button class="tab-btn" data-tab="portfolio" style="padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: normal; color: #666;">Portfolio</button>
                                            <button class="tab-btn" data-tab="reviews" style="padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: normal; color: #666;">Reviews</button>
                                            <button class="tab-btn" data-tab="contact" style="padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: normal; color: #666;">Contact</button>
                                        </div>

                                        <!-- Tab Content -->
                                        <div id="aboutTab" class="tab-content" style="display: block;">
                                            <p>{{ tailor.business_description }}</p>
                                        </div>

                                        <div id="portfolioTab" class="tab-content" style="display: none;">
                                            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; padding: 10px;">
                                                {% for a in products %}
                                                    {% if a.tailor.id == tailor.id %}
                                                        <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                                            <a href="javascript:void(0);" data-bs-toggle="modal" data-bs-target="#orderModal{{ a.id }}" style="display:block;">
                                                                {% if a.images.all %}
                                                                    <div style="width: 100%; height: 200px; overflow: hidden;">
                                                                        <img src="{{ a.images.first.image.url }}" alt="{{ a.title }}" 
                                                                            style="width: 100%; height: 200px; object-fit: cover; transition: transform 0.3s ease;">
                                                                    </div>
                                                                {% else %}
                                                                    <div style="width: 100%; height: 200px; background: #f1f1f1; display: flex; align-items: center; justify-content: center; color: #777;">
                                                                        <i class="fas fa-image" style="font-size: 40px;"></i>
                                                                    </div>
                                                                {% endif %}
                                                            </a>
                                                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.6); color: white; padding: 8px; text-align: center;">
                                                                {{ a.name }} - ‡ß≥{{ a.price }}
                                                            </div>
                                                        </div>





                                                        <!-- Modal for each portfolio product -->
                                                        <div id="orderModal{{ a.id }}" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 9999; overflow-y: auto;">
                                                            <div style="background: #fff; max-width: 1000px; height: 100vh; width: 90%; margin: 50px auto; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); padding: 30px; position: relative; display: flex; flex-wrap: wrap; gap: 20px;">
                                                                <!-- Close button moved inside the white content div -->
                                                                <span onclick="document.getElementById('orderModal{{ a.id }}').style.display='none'" 
                                                                    style="position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 24px; color: #333; z-index: 1;">
                                                                    &times;
                                                                </span>
                                                                <!-- Left: Image Section -->
                                                                <div style="flex: 1 1 45%; display: flex; flex-direction: column; align-items: center;">
                                                                    <!-- Main Image -->
                                                                    {% if a.images.all|length > 0 %}
                                                                        <img id="mainImage{{ a.id }}" src="{{ a.images.all.0.image.url }}" alt="{{ a.name }}" style="width: 400px; max-height: 560px; object-fit: cover; border-radius: 8px; margin-bottom: 15px; padding-top: 10px;">
                                                                    {% else %}
                                                                        <div style="width: 100%; height: 400px; background: #eee; border-radius: 8px;"></div>
                                                                    {% endif %}

                                                                    <!-- Thumbnail Images -->
                                                                    <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                                                                        {% for image in a.images.all %}
                                                                            <img src="{{ image.image.url }}" onclick="changeMainImage('{{ a.id }}', '{{ image.image.url }}')" style="width: 80px; height: 80px; object-fit: cover; border-radius: 6px; cursor: pointer; border: 2px solid #ddd;">
                                                                        {% endfor %}
                                                                    </div>
                                                                </div>

                                                                <!-- Right: Product Info -->
                                                                <div style="flex: 1 1 50%; display: flex; flex-direction: column; gap: 0px; padding: 5px 0;">
                                                                    <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 0;">{{ a.name }}</h2>
                                                                    <p style="font-size: 20px; font-weight: bold; color: #2563EB; margin-bottom: 0;">‡ß≥{{ a.price }}</p>

                                                                    <p style="font-size: 15px; color: #555; margin-bottom: 0;">{{ a.description }}</p>

                                                                    <div style="margin-bottom: 0;">
                                                                        <h4 style="margin-bottom: 0; font-size: 16px;">Features</h4>
                                                                        <ul style="list-style: none; padding-left: 0; font-size: 14px; color: #444; margin-top: 0;">
                                                                            <li>‚úî Premium Cotton Fabric</li>
                                                                            <li>‚úî Traditional Embroidery</li>
                                                                            <li>‚úî Comfortable Fit</li>
                                                                            <li>‚úî Machine Washable</li>
                                                                        </ul>
                                                                    </div>

                                                                    <!-- Size Selection -->
                                                                    <div style="margin-bottom: 5px;">
                                                                        <h4 style="margin-bottom: 3px; font-size: 16px;">Select Size</h4>
                                                                        <div id="sizeContainer{{ a.id }}" style="display: flex; gap: 8px;">
                                                                            <button type="button" class="size-btn selected" data-size="S" onclick="selectSize(this, '{{ a.id }}')" style="width: 40px; height: 40px; border: 2px solid #0216adff; background-color: #0216adff; color: white; border-radius: 4px; cursor: pointer; font-weight: bold;display: flex;align-items: center;justify-content: center;">S</button>
                                                                            
                                                                            <button type="button" class="size-btn" data-size="M" onclick="selectSize(this, '{{ a.id }}')" style="width: 40px; height: 40px; border: 2px solid #ddd; background-color: white; color: #333; border-radius: 4px; cursor: pointer; font-weight: bold;display: flex;align-items: center;justify-content: center;">M</button>
                                                                            
                                                                            <button type="button" class="size-btn" data-size="L" onclick="selectSize(this, '{{ a.id }}')" style="width: 40px; height: 40px; border: 2px solid #ddd; background-color: white; color: #333; border-radius: 4px; cursor: pointer; font-weight: bold;display: flex;align-items: center;justify-content: center;">L</button>
                                                                            
                                                                            <button type="button" class="size-btn" data-size="XL" onclick="selectSize(this, '{{ a.id }}')" style="width: 40px; height: 40px; border: 2px solid #ddd; background-color: white; color: #333;border-radius: 4px; cursor: pointer; font-weight: bold;display: flex;align-items: center;justify-content: center;">XL</button>
                                                                            
                                                                            <button type="button" class="size-btn" data-size="XXL" onclick="selectSize(this, '{{ a.id }}')" style="
                                                                                width: 40px; height: 40px; border: 2px solid #ddd; background-color: white;color: #333; border-radius: 4px; cursor: pointer; font-weight: bold;display: flex;align-items: center;justify-content: center;">XXL</button>
                                                                        </div>
                                                                    </div>

                                                                    <script>
                                                                        // Function to handle size selection
                                                                        function selectSize(element, productId) {
                                                                            // Remove selected class from all buttons
                                                                            const buttons = document.querySelectorAll(`#sizeContainer${productId} .size-btn`);
                                                                            buttons.forEach(btn => {
                                                                                btn.classList.remove('selected');
                                                                                btn.style.backgroundColor = 'white';
                                                                                btn.style.borderColor = '#ddd';
                                                                                btn.style.color = '#333';
                                                                            });
                                                                            
                                                                            // Add selected class to clicked button
                                                                            element.classList.add('selected');
                                                                            element.style.backgroundColor = '#0216adff';
                                                                            element.style.borderColor = '#0216adff';
                                                                            element.style.color = 'white';
                                                                            
                                                                            // Update the hidden size field
                                                                            document.getElementById(`hiddenSize${productId}`).value = element.dataset.size;
                                                                            
                                                                            // Update the size display in the order form
                                                                            const sizeDisplay = document.getElementById(`selectedSizeDisplay${productId}`);
                                                                            if (sizeDisplay) {
                                                                                sizeDisplay.textContent = element.dataset.size;
                                                                            }
                                                                        }
                                                                    </script>

                                                                    <!-- Quantity -->
                                                                    <div style="margin-bottom: 8px;">
                                                                        <h4 style="margin-bottom: 3px; font-size: 16px;">Quantity</h4>
                                                                        <div style="display: flex; align-items: center; gap: 5px;">
                                                                            <!-- Minus Button -->
                                                                            <button type="button" onclick="changeQty{{ a.id }}(-1)" style="width: 35px; height: 35px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 4px; font-size: 18px; cursor: pointer; transition: 0.2s;" onmouseover="this.style.background='#ddd'" onmouseout="this.style.background='#f0f0f0'">-</button>

                                                                            <!-- Quantity Input -->
                                                                            <input id="qtyInput{{ a.id }}" type="number" name="quantity" value="1" min="1" max="4" 
                                                                                style="width: 60px; text-align: center; padding: 5px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">
                                                                            
                                                                            <!-- Plus Button -->
                                                                            <button type="button" onclick="changeQty{{ a.id }}(1)" style="width: 35px; height: 35px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 4px; font-size: 18px; cursor: pointer; transition: 0.2s;" onmouseover="this.style.background='#ddd'" onmouseout="this.style.background='#f0f0f0'">+</button>
                                                                        </div>
                                                                    </div>

                                                                    <p style="font-size: 14px; color: #666; margin-bottom: 2px;">üöö Delivery Time: 3-7 days</p>
                                                                    <p style="font-size: 14px; color: #666; margin-bottom: 0;">üìç Made in Dhaka</p>

                                                                    <!-- Buttons -->
                                                                    <div style="display: flex; gap: 10px; margin-top: 5px; margin-bottom: 5px;">
                                                                            
                                                                        <button type="button" onclick="openOrderFormModal('{{ a.id }}')" 
                                                                                style="padding: 8px 16px; background: #2563EB; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
                                                                            Order Now
                                                                        </button>

                                                                        <!-- Order Form Modal -->
                                                                        <div id="orderFormModal{{ a.id }}" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 10000; overflow-y: auto;">
                                                                            <div style="background: #fff; max-width: 800px; margin: 50px auto; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); padding: 30px; position: relative;">
                                                                                <span onclick="document.getElementById('orderFormModal{{ a.id }}').style.display='none'" 
                                                                                    style="position: absolute; top: 10px; right: 10px; cursor: pointer; font-size: 24px; color: #333; z-index: 1;">
                                                                                    &times;
                                                                                </span>
                                                                                
                                                                                <h2 style="font-size: 24px; margin-bottom: 20px; text-align: center;">Place Order</h2>
                                                                                
                                                                                <form id="orderForm{{ a.id }}" method="POST" action="{% url 'create_order' %}">
                                                                                    {% csrf_token %}
                                                                                    
                                                                                    <!-- Hidden fields for product and tailor -->
                                                                                    <input type="hidden" name="product_id" value="{{ a.id }}">
                                                                                    <input type="hidden" name="tailor_id" value="{{ a.tailor.id }}">
                                                                                    <input type="hidden" name="quantity" id="hiddenQuantity{{ a.id }}" value="1">
                                                                                    <input type="hidden" name="price" value="{{ a.price }}">
                                                                                    <input type="hidden" name="size" id="hiddenSize{{ a.id }}" value="">
                                                                                    
                                                                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                                                                        <!-- Full Name -->
                                                                                        <div>
                                                                                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Full Name</label>
                                                                                            <input type="text" name="full_name" required 
                                                                                                value="{{ user.get_full_name }}" 
                                                                                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                                                                                                placeholder="Enter your full name">
                                                                                        </div>
                                                                                        
                                                                                        <!-- Phone -->
                                                                                        <div>
                                                                                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Phone Number</label>
                                                                                            <input type="tel" name="phone" required 
                                                                                                value="{{ user.customer.phone }}" 
                                                                                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                                                                                                placeholder="Enter your phone number">
                                                                                        </div>
                                                                                    </div>
                                                                                    
                                                                                    <!-- Address -->
                                                                                    <div style="margin-bottom: 20px;">
                                                                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Address</label>
                                                                                        <textarea name="address" rows="3" required 
                                                                                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                                                                                                placeholder="Enter your delivery address">{{ user.customer.address }}</textarea>
                                                                                    </div>
                                                                                    
                                                                                    <!-- Special Instructions -->
                                                                                    <div style="margin-bottom: 20px;">
                                                                                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Special Instructions</label>
                                                                                        <textarea name="special_instructions" rows="3" maxlength="500" 
                                                                                                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
                                                                                                placeholder="Any special requests or customizations..."></textarea>
                                                                                        <p style="text-align: right; font-size: 12px; color: #666; margin-top: 5px;">
                                                                                            <span id="charCount{{ a.id }}">0</span>/500 characters
                                                                                        </p>
                                                                                    </div>
                                                                                    
                                                                                    <div style="border-top: 1px solid #eee; padding-top: 15px; margin-bottom: 20px;">
                                                                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                                                                            <div>
                                                                                                <p style="margin: 5px 0;">Item:</p>
                                                                                                <p style="margin: 5px 0;">Size:</p>
                                                                                                <p style="margin: 5px 0;">Quantity:</p>
                                                                                                <p style="margin: 5px 0; font-weight: bold;">Total:</p>
                                                                                            </div>
                                                                                            <div style="text-align: right;">
                                                                                                <p style="margin: 5px 0;">{{ a.category }}</p>
                                                                                                <p style="margin: 5px 0;" id="selectedSizeDisplay{{ a.id }}">S</p>
                                                                                                <p style="margin: 5px 0;" id="selectedQuantityDisplay{{ a.id }}">1</p>
                                                                                                <p style="margin: 5px 0; font-weight: bold;" id="totalPriceDisplay{{ a.id }}">TK {{ a.price }} BDT</p>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    
                                                                                    <button type="submit" 
                                                                                            style="width: 100%; padding: 12px; background-color: #0216adff; color: white; border: none; border-radius: 4px; font-size: 16px; cursor: pointer;">
                                                                                        Confirm Order
                                                                                    </button>
                                                                                </form>
                                                                            </div>
                                                                        </div>

                                                                        <script>
                                                                            // Function to open the order form modal
                                                                            function openOrderFormModal(productId) {
                                                                                // Get the currently selected size from the size selection buttons
                                                                                const selectedSizeBtn = document.querySelector(`#sizeContainer${productId} .size-btn.selected`);
                                                                                const selectedSize = selectedSizeBtn ? selectedSizeBtn.dataset.size : 'S';
                                                                                
                                                                                const quantity = document.getElementById(`qtyInput${productId}`).value;
                                                                                const price = {{ a.price }};
                                                                                const totalPrice = price * quantity;
                                                                                
                                                                                // Set the hidden fields with current selected values
                                                                                document.getElementById(`hiddenSize${productId}`).value = selectedSize;
                                                                                document.getElementById(`hiddenQuantity${productId}`).value = quantity;
                                                                                
                                                                                // Update the display in order form
                                                                                document.getElementById(`selectedSizeDisplay${productId}`).textContent = selectedSize;
                                                                                document.getElementById(`selectedQuantityDisplay${productId}`).textContent = quantity;
                                                                                document.getElementById(`totalPriceDisplay${productId}`).textContent = `TK ${totalPrice} BDT`;
                                                                                
                                                                                // Show the modal
                                                                                document.getElementById(`orderFormModal${productId}`).style.display = 'block';
                                                                            }
                                                                            
                                                                            // Character count for special instructions
                                                                            document.querySelectorAll('textarea[name="special_instructions"]').forEach(textarea => {
                                                                                textarea.addEventListener('input', function() {
                                                                                    const charCount = this.value.length;
                                                                                    const charCountElement = this.closest('.modal').querySelector('[id^="charCount"]');
                                                                                    if (charCountElement) {
                                                                                        charCountElement.textContent = charCount;
                                                                                    }
                                                                                });
                                                                            });
                                                                            
                                                                            // Close modal when clicking outside
                                                                            window.addEventListener('click', function(event) {
                                                                                document.querySelectorAll('[id^="orderFormModal"]').forEach(modal => {
                                                                                    if (event.target === modal) {
                                                                                        modal.style.display = 'none';
                                                                                    }
                                                                                });
                                                                            });
                                                                        </script>

                                                                    </div>
                                                                    <h2>About the Tailor</h2>
                                                                    
                                                                    <p>{{ a.tailor.user.first_name }} {{ a.tailor.user.last_name }}<br> {{a.tailor.business_name}}<br>{{a.tailor.business_location}}<br>{{ a.tailor.business_description }}</p>
                                                                    
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <script>
                                                            // Quantity control functions
                                                            function changeQty{{ a.id }}(delta) {
                                                                const input = document.getElementById("qtyInput{{ a.id }}");
                                                                let value = parseInt(input.value) || 1;
                                                                value += delta;
                                                                if (value < 1) value = 1;
                                                                if (value > 4) value = 4;
                                                                input.value = value;
                                                            }

                                                            // Make sure the DOM is loaded before attaching event listeners
                                                            document.addEventListener('DOMContentLoaded', function() {
                                                                // Initialize quantity input
                                                                const qtyInput = document.getElementById("qtyInput{{ a.id }}");
                                                                if (qtyInput) {
                                                                    qtyInput.addEventListener('change', function() {
                                                                        let value = parseInt(this.value) || 1;
                                                                        if (value < 1) this.value = 1;
                                                                        if (value > 4) this.value = 4;
                                                                    });
                                                                }
                                                            });
                                                            function changeMainImage(productId, imageUrl) {
                                                                document.getElementById('mainImage' + productId).src = imageUrl;
                                                            }

                                                            // Optional: Close modal on outside click
                                                            window.addEventListener("click", function(event) {
                                                                const modal = document.getElementById("orderModal{{ a.id }}");
                                                                if (event.target === modal) {
                                                                    modal.style.display = "none";
                                                                }
                                                            });

                                                            document.querySelector(`[data-bs-target="#orderModal{{ a.id }}"]`).addEventListener("click", function() {
                                                                document.getElementById("orderModal{{ a.id }}").style.display = "flex";
                                                            });
                                                            // Optional: Close modal on click outside
                                                            window.addEventListener("click", function(event) {
                                                            const modal = document.getElementById("orderModal{{ a.id }}");
                                                            if (event.target === modal) {
                                                                modal.style.display = "none";
                                                            }
                                                            });

                                                            // Show modal manually (no Bootstrap)
                                                            document.querySelector(`[data-bs-target="#orderModal{{ a.id }}"]`).addEventListener("click", function() {
                                                            document.getElementById("orderModal{{ a.id }}").style.display = "flex";
                                                            });
                                                        </script>




                                                    {% endif %}
                                                {% empty %}
                                                    <div style="text-align: center; padding: 20px; color: #666; grid-column: 1/-1;">
                                                        <i class="fas fa-images" style="font-size: 40px; margin-bottom: 10px;"></i>
                                                        <p>No portfolio items available</p>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>


                                        <div id="reviewsTab" class="tab-content" style="display: none;">
                                            <!-- Reviews will be loaded here -->
                                            <div style="text-align: center; padding: 20px; color: #666;">
                                                {% for review in reviews %}
                                                    {% if review.tailor.id == tailor.id %}
                                                        <div style="border-bottom: 1px solid #eee; padding: 10px 0;">
                                                            <p style="margin: 0; font-weight: bold;">{{ review.user.username }}</p>
                                                            <p style="margin: 5px 0;">Rating: {{ review.rating }} ‚≠ê</p>
                                                            <p style="margin: 5px 0; color: #555;">"{{ review.comment }}"</p>
                                                        </div>
                                                    {% endif %}
                                                {% empty %}
                                                    <i class="fas fa-comments" style="font-size: 40px; margin-bottom: 10px;"></i>
                                                    <p>No reviews here</p>
                                                {% endfor %}
                                            </div>
                                        </div>

                                        <div id="contactTab" class="tab-content" style="display: none;">
                                            <!-- Contact info will be loaded here -->
                                            <div style="padding: 10px;">
                                                <p><i class="fas fa-phone" style="margin-right: 10px;"></i> {{ tailor.phone|default:"Phone number not provided" }}</p>
                                                <p><i class="fas fa-envelope" style="margin-right: 10px;"></i> {{ tailor.user.email }}</p>
                                                <p><i class="fas fa-map-marker-alt" style="margin-right: 10px;"></i> {{ tailor.business_location }}</p>
                                            </div>
                                        </div>

                                        <script>
                                            // Tab functionality
                                            document.querySelectorAll('.tab-btn').forEach(btn => {
                                                btn.addEventListener('click', function() {
                                                    // Remove active class from all buttons
                                                    document.querySelectorAll('.tab-btn').forEach(b => {
                                                        b.classList.remove('active');
                                                        b.style.fontWeight = 'normal';
                                                        b.style.color = '#666';
                                                        b.style.borderBottom = 'none';
                                                    });
                                                    
                                                    // Add active class to clicked button
                                                    this.classList.add('active');
                                                    this.style.fontWeight = 'bold';
                                                    this.style.color = '#194afb';
                                                    this.style.borderBottom = '2px solid #194afb';
                                                    
                                                    // Hide all tab contents
                                                    document.querySelectorAll('.tab-content').forEach(content => {
                                                        content.style.display = 'none';
                                                    });
                                                    
                                                    // Show selected tab content
                                                    const tabId = this.getAttribute('data-tab') + 'Tab';
                                                    document.getElementById(tabId).style.display = 'block';
                                                });
                                            });
                                        </script>
                                        <!-- Form Section -->
                                        <button onclick="openCustomOrderModal('{{ tailor.id }}')" 
                                            style="display: inline-block; margin-top: 10px; padding: 8px 16px; background-color: #3498db; color: white; text-decoration: none; border: none; border-radius: 5px; cursor: pointer;">
                                            Custom Order
                                        </button>

                                        <div id="customOrderModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 9999; font-family: 'Arial', sans-serif;">
                                            <div style="background: #fff; padding: 30px; border-radius: 8px; width: 700px; max-width: 95%; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.2); max-height: 90vh; overflow-y: auto;">

                                                <!-- Close Button -->
                                                <span id="closeCustomOrderModal" 
                                                    style="position: absolute; top: 15px; right: 20px; cursor: pointer; font-size: 24px; color: #888; font-weight: bold;">
                                                    ‚úñ
                                                </span>
                                                
                                                <!-- Modal Title -->
                                                <h3 style="font-size: 26px; color: #333; margin-bottom: 20px; font-weight: 700;">Custom Order</h3>
                                                        <!-- Progress Steps -->
                                                        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                                                            <div style="display: flex; align-items: center;">
                                                                <div class="step-circle active" data-step="1">1</div>
                                                                <div class="step-line"></div>
                                                                <div class="step-circle" data-step="2">2</div>
                                                                <div class="step-line"></div>
                                                                <div class="step-circle" data-step="3">3</div>
                                                                <div class="step-line"></div>
                                                                <div class="step-circle" data-step="4">4</div>
                                                            </div>
                                                        </div>

                                                        <form id="hireForm" method="POST" action="{% url 'create_custom_orders' tailor.id %}">
                                                            {% csrf_token %}
                                                            
                                                            <!-- Step 1: Basic Information -->
                                                            <div class="form-step active" data-step="1">
                                                                <h4 style="font-size: 20px; margin-bottom: 15px; color: #333;">Basic Information</h4>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Full Name*</label>
                                                                    <input type="text" name="full_name" value="{{ user.get_full_name }}" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;">
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Phone Number*</label>
                                                                    <input type="tel" name="phone" value="{{ user.customer.phone }}" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;">
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Email Address*</label>
                                                                    <input type="email" name="email" value="{{ user.email }}" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;">
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Delivery Address*</label>
                                                                    <textarea name="address" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px; height: 80px;">{{ user.customer.address }}</textarea>
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Gender*</label>
                                                                    <div style="display: flex; gap: 15px;">
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="gender" value="Men" required style="margin-right: 5px;"> Men
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="gender" value="Women" required style="margin-right: 5px;"> Women
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="gender" value="Unisex" required style="margin-right: 5px;"> Unisex
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                                                                    <button type="button" class="next-step" style="padding: 8px 20px; background-color: #194afb; color: white; border: none; border-radius: 5px; cursor: pointer;">Next</button>
                                                                </div>
                                                            </div>

                                                            <!-- Step 2: Garment Details -->
                                                            <div class="form-step" data-step="2">
                                                                <h4 style="font-size: 20px; margin-bottom: 15px; color: #333;">Garment Details</h4>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Garment Type*</label>
                                                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Panjabi" required style="margin-right: 5px;"> Panjabi
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Salwar Kameez" required style="margin-right: 5px;"> Salwar Kameez
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Formal Shirt" required style="margin-right: 5px;"> Formal Shirt
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Casual Shirt" required style="margin-right: 5px;"> Casual Shirt
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Suit" required style="margin-right: 5px;"> Suit
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Blazer" required style="margin-right: 5px;"> Blazer
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Saree Blouse" required style="margin-right: 5px;"> Saree Blouse
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Kurti" required style="margin-right: 5px;"> Kurti
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Dress" required style="margin-right: 5px;"> Dress
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Pant" required style="margin-right: 5px;"> Pant
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Shorts" required style="margin-right: 5px;"> Shorts
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Traditional Wear" required style="margin-right: 5px;"> Traditional Wear
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="radio" name="garment_type" value="Other" required style="margin-right: 5px;"> Other
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Occasion*</label>
                                                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Wedding" style="margin-right: 5px;"> Wedding
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Festival" style="margin-right: 5px;"> Festival
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Office/Formal" style="margin-right: 5px;"> Office/Formal
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Casual Daily Wear" style="margin-right: 5px;"> Casual Daily Wear
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Party/Event" style="margin-right: 5px;"> Party/Event
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Religious Ceremony" style="margin-right: 5px;"> Religious Ceremony
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Business Meeting" style="margin-right: 5px;"> Business Meeting
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Date Night" style="margin-right: 5px;"> Date Night
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Travel" style="margin-right: 5px;"> Travel
                                                                        </label>
                                                                        <label style="display: flex; align-items: center;">
                                                                            <input type="checkbox" name="occasion" value="Other" style="margin-right: 5px;"> Other
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                                                                    <button type="button" class="prev-step" style="padding: 8px 20px; background-color: #f0f0f0; color: #333; border: none; border-radius: 5px; cursor: pointer;">Previous</button>
                                                                    <button type="button" class="next-step" style="padding: 8px 20px; background-color: #194afb; color: white; border: none; border-radius: 5px; cursor: pointer;">Next</button>
                                                                </div>
                                                            </div>

                                                            <!-- Step 3: Measurements -->
                                                            <div class="form-step" data-step="3">
                                                                <h4 style="font-size: 20px; margin-bottom: 15px; color: #333;">Measurements (inches)</h4>
                                                                <p style="margin-bottom: 15px; color: #666;">Please provide your measurements in inches. Our tailor will verify these during consultation.</p>
                                                                
                                                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 15px;">
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Chest/Bust*</label>
                                                                        <input type="number" name="chest" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 38" step="0.1" min="20" max="60">
                                                                    </div>
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Waist*</label>
                                                                        <input type="number" name="waist" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 32" step="0.1" min="20" max="60">
                                                                    </div>
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Hips*</label>
                                                                        <input type="number" name="hips" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 36" step="0.1" min="20" max="60">
                                                                    </div>
                                                                </div>
                                                                
                                                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Sleeve Length*</label>
                                                                        <input type="number" name="sleeve_length" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 24" step="0.1" min="10" max="40">
                                                                    </div>
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Neck Length*</label>
                                                                        <input type="number" name="neck" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 28" step="0.1" min="10" max="80">
                                                                    </div>
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Shoulder Width*</label>
                                                                        <input type="number" name="shoulder_width" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 16" step="0.1" min="10" max="30">
                                                                    </div>
                                                                </div>
                                                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Inseam Length*</label>
                                                                        <input type="number" name="inseam" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 24" step="0.1" min="10" max="40">
                                                                    </div>
                                                                    <div>
                                                                        <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Length*</label>
                                                                        <input type="number" name="length" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. 24" step="0.1" min="10" max="40">
                                                                    </div>
                                                                </div>
                                                                
                                                                <div style="background: #f9f9f9; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                                                                    <h5 style="font-size: 16px; margin-bottom: 10px; color: #333;">Measurement Tips:</h5>
                                                                    <ul style="margin: 0; padding-left: 20px; color: #666;">
                                                                        <li>Use a soft measuring tape</li>
                                                                        <li>Measure over light clothing</li>
                                                                        <li>Stand straight and relaxed</li>
                                                                        <li>Our tailor will take final measurements during consultation</li>
                                                                    </ul>
                                                                </div>
                                                                
                                                                <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                                                                    <button type="button" class="prev-step" style="padding: 8px 20px; background-color: #f0f0f0; color: #333; border: none; border-radius: 5px; cursor: pointer;">Previous</button>
                                                                    <button type="button" class="next-step" style="padding: 8px 20px; background-color: #194afb; color: white; border: none; border-radius: 5px; cursor: pointer;">Next</button>
                                                                </div>
                                                            </div>

                                                            <!-- Step 4: Design Preferences -->
                                                            <div class="form-step" data-step="4">
                                                                <h4 style="font-size: 20px; margin-bottom: 15px; color: #333;">Design Preferences</h4>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Fabric Preference*</label>
                                                                    <input type="text" name="fabric_preference" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. Cotton, Silk, Linen, Blend">
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Color Preference*</label>
                                                                    <input type="text" name="color_preference" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px;" placeholder="e.g. Navy, White, Multicolor">
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Design Inspiration </label>
                                                                    <textarea name="design_inspiration" style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px; height: 80px;" placeholder="Share any design, reference images you have, or specific style preference..."></textarea>
                                                                </div>
                                                                
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Detailed Description*</label>
                                                                    <textarea name="description" required style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px; height: 120px;" placeholder="Describe your requirements in detail. Include any special features, embellishments, or specific requests"></textarea>
                                                                </div>
                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Special Note </label>
                                                                    <textarea name="special_request" style="width: 100%; padding: 8px; font-size: 15px; border: 1px solid #ccc; border-radius: 5px; height: 80px;" placeholder="Special request"></textarea>
                                                                </div>

                                                                <!-- Embroidery design section -->
                                                                <div style="margin-bottom: 15px;">
                                                                    <button type="button" id="embroideryBtn" style="padding: 8px 16px; background-color: #6c5ce7; color: white; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 10px;">
                                                                        <i class="fas fa-palette" style="margin-right: 5px;"></i> Add Embroidery Design
                                                                    </button>
                                                                    
                                                                    <!-- Selected Designs Display - Always visible -->
                                                                    <div id="selectedEmbroideryDisplay" style="background: #f8f9fa; padding: 12px; border-radius: 5px; margin-top: 10px;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                                                            <h5 style="font-size: 16px; margin: 0; color: #333;">Selected Embroidery Designs:</h5>
                                                                            <button type="button" id="clearEmbroideryBtn" style="padding: 4px 8px; background-color: #f8f9fa; color: #666; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; font-size: 12px; display: none;">
                                                                                Clear All
                                                                            </button>
                                                                        </div>
                                                                        <div id="selectedEmbroideryList" style="min-height: 20px;">
                                                                            <span style="color: #666; font-style: italic;">None</span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- Add this in the Design Preferences section (Step 4) after the embroidery section -->
                                                                <div style="margin-bottom: 15px;">
                                                                    <button type="button" id="fabricsBtn" style="padding: 8px 16px; background-color: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 10px;">
                                                                        <i class="fas fa-tshirt" style="margin-right: 5px;"></i> Select Fabric
                                                                    </button>
                                                                    
                                                                    <!-- Selected Fabrics Display -->
                                                                    <div id="selectedFabricsDisplay" style="background: #f8f9fa; padding: 12px; border-radius: 5px; margin-top: 10px;">
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                                                            <h5 style="font-size: 16px; margin: 0; color: #333;">Selected Fabric:</h5>
                                                                            <button type="button" id="clearFabricsBtn" style="padding: 4px 8px; background-color: #f8f9fa; color: #666; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; font-size: 12px; display: none;">
                                                                                Clear
                                                                            </button>
                                                                        </div>
                                                                        <div id="selectedFabricsList" style="min-height: 20px;">
                                                                            <span style="color: #666; font-style: italic;">None</span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- Add this tab button in the navigation tabs section -->
                                                                <button class="tab-btn" data-tab="fabrics" style="padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: normal; color: #666;">Fabrics</button>

                                                                    <!-- Add this tab content in the tab content section -->
                                                                    <div id="fabricsTab" class="tab-content" style="display: none;">
                                                                        <!-- Header for Fabrics Tab -->
                                                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                                                                            <h4 style="font-size: 18px; margin: 0; color: #333;">Available Fabrics</h4>
                                                                            <button type="button" id="saveFabricsBtn" style="padding: 6px 12px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                                                                                <i class="fas fa-check" style="margin-right: 5px;"></i> Done
                                                                            </button>
                                                                        </div>
                                                                        
                                                                        <!-- Fabrics Cards Grid -->
                                                                        <div id="fabricsCards" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; max-height: 400px; overflow-y: auto; padding: 10px;">
                                                                            {% for fabric in fabrics %}
                                                                                <div class="fabric-card" data-id="{{ fabric.id }}" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: white; cursor: pointer; transition: all 0.3s; position: relative;">
                                                                                    <div style="height: 120px; overflow: hidden;">
                                                                                        {% if fabric.image %}
                                                                                            <img src="{{ fabric.image.url }}" alt="{{ fabric.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                                                                                        {% else %}
                                                                                            <div style="width: 100%; height: 100%; background: #f1f1f1; display: flex; align-items: center; justify-content: center; color: #777;">
                                                                                                <i class="fas fa-image" style="font-size: 24px;"></i>
                                                                                            </div>
                                                                                        {% endif %}
                                                                                    </div>
                                                                                    <div style="padding: 10px;">
                                                                                        <h6 style="margin: 0 0 5px 0; font-size: 14px; color: #333; font-weight: 600;">{{ fabric.name }}</h6>
                                                                                        <p style="margin: 0; font-size: 12px; color: #666;">{{ fabric.fabric_type }} ‚Ä¢ {{ fabric.color }}</p>
                                                                                        <p style="margin: 5px 0 0 0; font-size: 14px; font-weight: bold; color: #194afb;">‡ß≥{{ fabric.price_per_meter }}/meter</p>
                                                                                        <p style="margin: 2px 0 0 0; font-size: 12px; color: #666;">Available: {{ fabric.length_available }}m</p>
                                                                                    </div>
                                                                                    <div class="fabric-checkbox" style="position: absolute; top: 5px; right: 5px; display: none;">
                                                                                        <i class="fas fa-check-circle" style="color: #28a745; font-size: 20px;"></i>
                                                                                    </div>
                                                                                </div>
                                                                            {% empty %}
                                                                                <div style="text-align: center; padding: 20px; color: #666; grid-column: 1/-1;">
                                                                                    <i class="fas fa-tshirt" style="font-size: 40px; margin-bottom: 10px;"></i>
                                                                                    <p>No fabrics available</p>
                                                                                </div>
                                                                            {% endfor %}
                                                                            <!-- Hidden field for selected fabric ID -->
                                                                            <input type="hidden" name="selected_fabric_id" id="selectedFabricId" value="">
                                                                            
                                                                            <!-- Hidden field for fabric price -->
                                                                            <input type="hidden" name="fabric_price" id="fabricPrice" value="0">
                                                                            
                                                                            <!-- Hidden field for fabric length needed -->
                                                                            <input type="hidden" name="fabric_length_needed" id="fabricLengthNeeded" value="0">
                                                                        </div>
                                                                        
                                                                        <!-- Fabric Length Input -->
                                                                        <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                                                                            <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #333;">Fabric Length Needed (meters)*</label>
                                                                            <input type="number" id="fabricLengthInput" min="0.5" max="10" step="0.1" value="2" 
                                                                                style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
                                                                                placeholder="Enter fabric length in meters">
                                                                            <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">
                                                                                Typical lengths: Shirt (2-2.5m), Pant (1.5-2m), Punjabi (3-4m)
                                                                            </p>
                                                                        </div>
                                                                    </div>

                                                                    <!-- Add this JavaScript for fabrics functionality -->
                                                                    <script>
                                                                        document.addEventListener('DOMContentLoaded', function() {
                                                                            const fabricsBtn = document.getElementById('fabricsBtn');
                                                                            const fabricsTab = document.getElementById('fabricsTab');
                                                                            const saveFabricsBtn = document.getElementById('saveFabricsBtn');
                                                                            const fabricCards = document.querySelectorAll('.fabric-card');
                                                                            const selectedFabricsDisplay = document.getElementById('selectedFabricsDisplay');
                                                                            const selectedFabricsList = document.getElementById('selectedFabricsList');
                                                                            const clearFabricsBtn = document.getElementById('clearFabricsBtn');
                                                                            const fabricLengthInput = document.getElementById('fabricLengthInput');
                                                                            
                                                                            // Store selected fabric data
                                                                            let selectedFabricId = null;
                                                                            let selectedFabricPrice = 0;
                                                                            let fabricLength = 2; // Default length

                                                                            // Function to show fabrics tab
                                                                            function showFabricsTab() {
                                                                                // Remove active class from all tab buttons
                                                                                document.querySelectorAll('.tab-btn').forEach(btn => {
                                                                                    btn.classList.remove('active');
                                                                                    btn.style.fontWeight = 'normal';
                                                                                    btn.style.color = '#666';
                                                                                    btn.style.borderBottom = 'none';
                                                                                });
                                                                                
                                                                                // Add active class to fabrics tab button
                                                                                const fabricsTabBtn = document.querySelector('[data-tab="fabrics"]');
                                                                                fabricsTabBtn.classList.add('active');
                                                                                fabricsTabBtn.style.fontWeight = 'bold';
                                                                                fabricsTabBtn.style.color = '#194afb';
                                                                                fabricsTabBtn.style.borderBottom = '2px solid #194afb';
                                                                                
                                                                                // Hide all tab contents
                                                                                document.querySelectorAll('.tab-content').forEach(content => {
                                                                                    content.style.display = 'none';
                                                                                });
                                                                                
                                                                                // Show fabrics tab content
                                                                                fabricsTab.style.display = 'block';
                                                                            }
                                                                            
                                                                            // Function to hide fabrics tab and go back to design tab
                                                                            function hideFabricsTab() {
                                                                                // Remove active class from fabrics tab button
                                                                                const fabricsTabBtn = document.querySelector('[data-tab="fabrics"]');
                                                                                fabricsTabBtn.classList.remove('active');
                                                                                fabricsTabBtn.style.fontWeight = 'normal';
                                                                                fabricsTabBtn.style.color = '#666';
                                                                                fabricsTabBtn.style.borderBottom = 'none';
                                                                                
                                                                                // Hide fabrics tab content
                                                                                fabricsTab.style.display = 'none';
                                                                                
                                                                                // Show design tab (assuming it's the previous one)
                                                                                const designTabBtn = document.querySelector('[data-tab="about"]');
                                                                                if (designTabBtn) {
                                                                                    designTabBtn.classList.add('active');
                                                                                    designTabBtn.style.fontWeight = 'bold';
                                                                                    designTabBtn.style.color = '#194afb';
                                                                                    designTabBtn.style.borderBottom = '2px solid #194afb';
                                                                                    
                                                                                    const designTab = document.getElementById('aboutTab');
                                                                                    if (designTab) {
                                                                                        designTab.style.display = 'block';
                                                                                    }
                                                                                }
                                                                            }
                                                                            
                                                                            // Open fabrics tab when button is clicked
                                                                            if (fabricsBtn) {
                                                                                fabricsBtn.addEventListener('click', showFabricsTab);
                                                                            }
                                                                            
                                                                            // Save selection and go back to design
                                                                            if (saveFabricsBtn) {
                                                                                saveFabricsBtn.addEventListener('click', hideFabricsTab);
                                                                            }
                                                                            
                                                                            // Function to calculate fabric total price
                                                                            function calculateFabricTotalPrice() {
                                                                                const length = parseFloat(fabricLengthInput.value) || 2;
                                                                                fabricLength = length;
                                                                                
                                                                                if (selectedFabricId) {
                                                                                    const card = document.querySelector(`.fabric-card[data-id="${selectedFabricId}"]`);
                                                                                    if (card) {
                                                                                        const priceText = card.querySelector('p:nth-child(3)').textContent;
                                                                                        const pricePerMeter = parseFloat(priceText.replace('‡ß≥', '').replace('/meter', '').trim()) || 0;
                                                                                        selectedFabricPrice = pricePerMeter * length;
                                                                                        
                                                                                        // Update hidden fields
                                                                                        document.getElementById('selectedFabricId').value = selectedFabricId;
                                                                                        document.getElementById('fabricPrice').value = selectedFabricPrice.toFixed(2);
                                                                                        document.getElementById('fabricLengthNeeded').value = length.toFixed(2);
                                                                                        
                                                                                        // Update display
                                                                                        updateFabricsSelectionDisplay();
                                                                                    }
                                                                                } else {
                                                                                    // No fabric selected
                                                                                    selectedFabricPrice = 0;
                                                                                    document.getElementById('selectedFabricId').value = '';
                                                                                    document.getElementById('fabricPrice').value = '0';
                                                                                    document.getElementById('fabricLengthNeeded').value = '0';
                                                                                    updateFabricsSelectionDisplay();
                                                                                }
                                                                            }

                                                                            // Handle fabric card selection
                                                                            fabricCards.forEach(card => {
                                                                                card.addEventListener('click', function() {
                                                                                    const fabricId = this.getAttribute('data-id');
                                                                                    
                                                                                    if (this.classList.contains('selected')) {
                                                                                        // Deselect
                                                                                        this.classList.remove('selected');
                                                                                        this.style.borderColor = '#ddd';
                                                                                        this.style.boxShadow = 'none';
                                                                                        this.querySelector('.fabric-checkbox').style.display = 'none';
                                                                                        
                                                                                        // Remove selection
                                                                                        selectedFabricId = null;
                                                                                    } else {
                                                                                        // Deselect all other cards first (single selection)
                                                                                        fabricCards.forEach(c => {
                                                                                            c.classList.remove('selected');
                                                                                            c.style.borderColor = '#ddd';
                                                                                            c.style.boxShadow = 'none';
                                                                                            c.querySelector('.fabric-checkbox').style.display = 'none';
                                                                                        });
                                                                                        
                                                                                        // Select current card
                                                                                        this.classList.add('selected');
                                                                                        this.style.borderColor = '#194afb';
                                                                                        this.style.boxShadow = '0 0 0 2px rgba(25, 74, 251, 0.2)';
                                                                                        this.querySelector('.fabric-checkbox').style.display = 'block';
                                                                                        
                                                                                        // Set selection
                                                                                        selectedFabricId = fabricId;
                                                                                    }
                                                                                    
                                                                                    calculateFabricTotalPrice();
                                                                                });
                                                                            });
                                                                            
                                                                            // Update fabric price when length changes
                                                                            if (fabricLengthInput) {
                                                                                fabricLengthInput.addEventListener('input', calculateFabricTotalPrice);
                                                                                fabricLengthInput.addEventListener('change', calculateFabricTotalPrice);
                                                                            }
                                                                            
                                                                            // Function to update the display of selected fabric
                                                                            function updateFabricsSelectionDisplay() {
                                                                                if (selectedFabricId) {
                                                                                    // Show clear button and update display
                                                                                    clearFabricsBtn.style.display = 'inline-block';
                                                                                    
                                                                                    // Clear current display
                                                                                    selectedFabricsList.innerHTML = '';
                                                                                    
                                                                                    // Add selected fabric to display
                                                                                    const card = document.querySelector(`.fabric-card[data-id="${selectedFabricId}"]`);
                                                                                    if (card) {
                                                                                        const title = card.querySelector('h6').textContent;
                                                                                        const fabricType = card.querySelector('p:nth-child(2)').textContent;
                                                                                        
                                                                                        const item = document.createElement('div');
                                                                                        item.style.background = '#e9ecef';
                                                                                        item.style.padding = '10px';
                                                                                        item.style.borderRadius = '5px';
                                                                                        item.style.marginBottom = '10px';
                                                                                        item.innerHTML = `
                                                                                            <div style="display: flex; justify-content: between; align-items: center;">
                                                                                                <div style="flex: 1;">
                                                                                                    <strong>${title}</strong><br>
                                                                                                    <small>${fabricType}</small><br>
                                                                                                    <small>Length: ${fabricLength.toFixed(2)}m</small>
                                                                                                </div>
                                                                                                <div style="text-align: right;">
                                                                                                    <strong>‡ß≥${selectedFabricPrice.toFixed(2)}</strong><br>
                                                                                                    <small style="color: #666;">(‡ß≥${(selectedFabricPrice/fabricLength).toFixed(2)}/m √ó ${fabricLength.toFixed(2)}m)</small>
                                                                                                </div>
                                                                                            </div>
                                                                                            <button type="button" class="remove-fabric-btn" style="margin-top: 5px; padding: 4px 8px; background: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">
                                                                                                <i class="fas fa-times"></i> Remove
                                                                                            </button>
                                                                                        `;
                                                                                        selectedFabricsList.appendChild(item);
                                                                                        
                                                                                        // Add remove functionality
                                                                                        item.querySelector('.remove-fabric-btn').addEventListener('click', function(e) {
                                                                                            e.stopPropagation();
                                                                                            const cardToDeselect = document.querySelector(`.fabric-card[data-id="${selectedFabricId}"]`);
                                                                                            if (cardToDeselect) {
                                                                                                cardToDeselect.classList.remove('selected');
                                                                                                cardToDeselect.style.borderColor = '#ddd';
                                                                                                cardToDeselect.style.boxShadow = 'none';
                                                                                                cardToDeselect.querySelector('.fabric-checkbox').style.display = 'none';
                                                                                            }
                                                                                            
                                                                                            selectedFabricId = null;
                                                                                            calculateFabricTotalPrice();
                                                                                        });
                                                                                    }
                                                                                    
                                                                                } else {
                                                                                    // Show "None" when no fabric selected
                                                                                    clearFabricsBtn.style.display = 'none';
                                                                                    selectedFabricsList.innerHTML = '<span style="color: #666; font-style: italic;">None</span>';
                                                                                    selectedFabricId = null; // Ensure it's empty
                                                                                }
                                                                            }
                                                                            
                                                                            // Clear fabric selection
                                                                            if (clearFabricsBtn) {
                                                                                clearFabricsBtn.addEventListener('click', function() {
                                                                                    // Deselect all cards
                                                                                    fabricCards.forEach(card => {
                                                                                        card.classList.remove('selected');
                                                                                        card.style.borderColor = '#ddd';
                                                                                        card.style.boxShadow = 'none';
                                                                                        card.querySelector('.fabric-checkbox').style.display = 'none';
                                                                                    });
                                                                                    
                                                                                    // Clear selected ID and price
                                                                                    selectedFabricId = null;
                                                                                    selectedFabricPrice = 0;
                                                                                    
                                                                                    // Update hidden fields
                                                                                    document.getElementById('selectedFabricId').value = '';
                                                                                    document.getElementById('fabricPrice').value = '0';
                                                                                    document.getElementById('fabricLengthNeeded').value = '0';
                                                                                    
                                                                                    // Update display
                                                                                    updateFabricsSelectionDisplay();
                                                                                });
                                                                            }
                                                                            
                                                                            // Initialize display
                                                                            calculateFabricTotalPrice();
                                                                        });
                                                                    </script>

                                                                <!-- Add this tab button in the navigation tabs section -->
                                                                <button class="tab-btn" data-tab="embroidery" style="padding: 10px 20px; border: none; background: none; cursor: pointer; font-weight: normal; color: #666;">Embroidery</button>

                                                                <!-- Add this tab content in the tab content section -->
                                                                <div id="embroideryTab" class="tab-content" style="display: none;">
                                                                    <!-- Header for Embroidery Tab -->
                                                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                                                                        <h4 style="font-size: 18px; margin: 0; color: #333;">Embroidery Designs</h4>
                                                                        <button type="button" id="saveEmbroideryBtn" style="padding: 6px 12px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                                                                            <i class="fas fa-check" style="margin-right: 5px;"></i> Done
                                                                        </button>
                                                                    </div>
                                                                    
                                                                    <!-- Embroidery Cards Grid -->
                                                                    <div id="embroideryCards" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; max-height: 400px; overflow-y: auto; padding: 10px;">
                                                                        {% for design in embroidery %}
                                                                            <div class="embroidery-card" data-id="{{ design.id }}" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: white; cursor: pointer; transition: all 0.3s; position: relative;">
                                                                                <div style="height: 120px; overflow: hidden;">
                                                                                    {% if design.design_image %}
                                                                                        <img src="{{ design.design_image.url }}" alt="{{ design.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                                                                                    {% else %}
                                                                                        <div style="width: 100%; height: 100%; background: #f1f1f1; display: flex; align-items: center; justify-content: center; color: #777;">
                                                                                            <i class="fas fa-image" style="font-size: 24px;"></i>
                                                                                        </div>
                                                                                    {% endif %}
                                                                                </div>
                                                                                <div style="padding: 10px;">
                                                                                    <h6 style="margin: 0 0 5px 0; font-size: 14px; color: #333; font-weight: 600;">{{ design.title }}</h6>
                                                                                    <p style="margin: 0; font-size: 12px; color: #666;">{{ design.fabric_type|default:"Various fabrics" }}</p>
                                                                                    <p style="margin: 5px 0 0 0; font-size: 14px; font-weight: bold; color: #194afb;">‡ß≥{{ design.price }}</p>
                                                                                </div>
                                                                                <div class="embroidery-checkbox" style="position: absolute; top: 5px; right: 5px; display: none;">
                                                                                    <i class="fas fa-check-circle" style="color: #28a745; font-size: 20px;"></i>
                                                                                </div>
                                                                            </div>
                                                                        {% empty %}
                                                                            <div style="text-align: center; padding: 20px; color: #666; grid-column: 1/-1;">
                                                                                <i class="fas fa-palette" style="font-size: 40px; margin-bottom: 10px;"></i>
                                                                                <p>No embroidery designs available</p>
                                                                            </div>
                                                                        {% endfor %}
                                                                        <!-- Hidden field for selected embroidery IDs -->
                                                                        <input type="hidden" name="selected_embroidery_ids" id="selectedEmbroideryIds" value="">
                                                                        
                                                                        <!-- Hidden field for total embroidery price -->
                                                                        <input type="hidden" name="embroidery_total_price" id="embroideryTotalPrice" value="0">
                                                                    </div>
                                                                </div>

                                                                <script>
                                                                    document.addEventListener('DOMContentLoaded', function() {
                                                                        const embroideryBtn = document.getElementById('embroideryBtn');
                                                                        const embroideryTab = document.getElementById('embroideryTab');
                                                                        const saveEmbroideryBtn = document.getElementById('saveEmbroideryBtn');
                                                                        const embroideryCards = document.querySelectorAll('.embroidery-card');
                                                                        const selectedEmbroideryDisplay = document.getElementById('selectedEmbroideryDisplay');
                                                                        const selectedEmbroideryList = document.getElementById('selectedEmbroideryList');
                                                                        const clearEmbroideryBtn = document.getElementById('clearEmbroideryBtn');
                                                                        
                                                                        // Store selected embroidery data
                                                                        let selectedEmbroideryIds = [];
                                                                        let embroideryTotalPrice = 0;

                                                                        // Function to show embroidery tab
                                                                        function showEmbroideryTab() {
                                                                            // Remove active class from all tab buttons
                                                                            document.querySelectorAll('.tab-btn').forEach(btn => {
                                                                                btn.classList.remove('active');
                                                                                btn.style.fontWeight = 'normal';
                                                                                btn.style.color = '#666';
                                                                                btn.style.borderBottom = 'none';
                                                                            });
                                                                            
                                                                            // Add active class to embroidery tab button
                                                                            const embroideryTabBtn = document.querySelector('[data-tab="embroidery"]');
                                                                            embroideryTabBtn.classList.add('active');
                                                                            embroideryTabBtn.style.fontWeight = 'bold';
                                                                            embroideryTabBtn.style.color = '#194afb';
                                                                            embroideryTabBtn.style.borderBottom = '2px solid #194afb';
                                                                            
                                                                            // Hide all tab contents
                                                                            document.querySelectorAll('.tab-content').forEach(content => {
                                                                                content.style.display = 'none';
                                                                            });
                                                                            
                                                                            // Show embroidery tab content
                                                                            embroideryTab.style.display = 'block';
                                                                        }
                                                                        
                                                                        // Function to hide embroidery tab and go back to design tab
                                                                        function hideEmbroideryTab() {
                                                                            // Remove active class from embroidery tab button
                                                                            const embroideryTabBtn = document.querySelector('[data-tab="embroidery"]');
                                                                            embroideryTabBtn.classList.remove('active');
                                                                            embroideryTabBtn.style.fontWeight = 'normal';
                                                                            embroideryTabBtn.style.color = '#666';
                                                                            embroideryTabBtn.style.borderBottom = 'none';
                                                                            
                                                                            // Hide embroidery tab content
                                                                            embroideryTab.style.display = 'none';
                                                                            
                                                                            // Show design tab (assuming it's the previous one)
                                                                            const designTabBtn = document.querySelector('[data-tab="about"]');
                                                                            if (designTabBtn) {
                                                                                designTabBtn.classList.add('active');
                                                                                designTabBtn.style.fontWeight = 'bold';
                                                                                designTabBtn.style.color = '#194afb';
                                                                                designTabBtn.style.borderBottom = '2px solid #194afb';
                                                                                
                                                                                const designTab = document.getElementById('aboutTab');
                                                                                if (designTab) {
                                                                                    designTab.style.display = 'block';
                                                                                }
                                                                            }
                                                                        }
                                                                        
                                                                        // Open embroidery tab when button is clicked
                                                                        if (embroideryBtn) {
                                                                            embroideryBtn.addEventListener('click', showEmbroideryTab);
                                                                        }
                                                                        
                                                                        // Save selection and go back to design
                                                                        if (saveEmbroideryBtn) {
                                                                            saveEmbroideryBtn.addEventListener('click', hideEmbroideryTab);
                                                                        }
                                                                        
                                                                        // Function to calculate total embroidery price
                                                                        function calculateEmbroideryTotalPrice() {
                                                                            embroideryTotalPrice = 0;
                                                                            selectedEmbroideryIds.forEach(id => {
                                                                                const card = document.querySelector(`.embroidery-card[data-id="${id}"]`);
                                                                                if (card) {
                                                                                    const priceText = card.querySelector('p:last-child').textContent;
                                                                                    const price = parseFloat(priceText.replace('‡ß≥', '').trim()) || 0;
                                                                                    embroideryTotalPrice += price;
                                                                                }
                                                                            });
                                                                            
                                                                            // Update hidden fields
                                                                            document.getElementById('selectedEmbroideryIds').value = selectedEmbroideryIds.join(',');
                                                                            document.getElementById('embroideryTotalPrice').value = embroideryTotalPrice.toFixed(2);
                                                                            
                                                                            // Update display
                                                                            updateEmbroiderySelectionDisplay();
                                                                        }

                                                                        // Handle embroidery card selection
                                                                        embroideryCards.forEach(card => {
                                                                            card.addEventListener('click', function() {
                                                                                const designId = this.getAttribute('data-id');
                                                                                const designTitle = this.querySelector('h6').textContent;
                                                                                const designPrice = this.querySelector('p:last-child').textContent;
                                                                                
                                                                                if (this.classList.contains('selected')) {
                                                                                    // Deselect
                                                                                    this.classList.remove('selected');
                                                                                    this.style.borderColor = '#ddd';
                                                                                    this.style.boxShadow = 'none';
                                                                                    this.querySelector('.embroidery-checkbox').style.display = 'none';
                                                                                    
                                                                                    // Remove from selection
                                                                                    const index = selectedEmbroideryIds.indexOf(designId);
                                                                                    if (index > -1) {
                                                                                        selectedEmbroideryIds.splice(index, 1);
                                                                                    }
                                                                                } else {
                                                                                    // Select
                                                                                    this.classList.add('selected');
                                                                                    this.style.borderColor = '#194afb';
                                                                                    this.style.boxShadow = '0 0 0 2px rgba(25, 74, 251, 0.2)';
                                                                                    this.querySelector('.embroidery-checkbox').style.display = 'block';
                                                                                    
                                                                                    // Add to selection
                                                                                    if (!selectedEmbroideryIds.includes(designId)) {
                                                                                        selectedEmbroideryIds.push(designId);
                                                                                    }
                                                                                }
                                                                                
                                                                                calculateEmbroideryTotalPrice();
                                                                            });
                                                                        });
                                                                        
                                                                        // Function to update the display of selected embroidery
                                                                        function updateEmbroiderySelectionDisplay() {
                                                                            if (selectedEmbroideryIds.length > 0) {
                                                                                // Show clear button and update display
                                                                                clearEmbroideryBtn.style.display = 'inline-block';
                                                                                
                                                                                // Clear current display
                                                                                selectedEmbroideryList.innerHTML = '';
                                                                                
                                                                                // Add selected items to display
                                                                                selectedEmbroideryIds.forEach(id => {
                                                                                    const card = document.querySelector(`.embroidery-card[data-id="${id}"]`);
                                                                                    if (card) {
                                                                                        const title = card.querySelector('h6').textContent;
                                                                                        const price = card.querySelector('p:last-child').textContent;
                                                                                        
                                                                                        const item = document.createElement('div');
                                                                                        item.style.display = 'inline-flex';
                                                                                        item.style.alignItems = 'center';
                                                                                        item.style.background = '#e9ecef';
                                                                                        item.style.padding = '5px 10px';
                                                                                        item.style.borderRadius = '15px';
                                                                                        item.style.margin = '0 5px 5px 0';
                                                                                        item.style.fontSize = '14px';
                                                                                        item.innerHTML = `
                                                                                            ${title} ${price}
                                                                                            <span class="remove-btn" data-id="${id}" style="margin-left: 5px; cursor: pointer; color: #dc3545;">
                                                                                                <i class="fas fa-times"></i>
                                                                                            </span>
                                                                                        `;
                                                                                        selectedEmbroideryList.appendChild(item);
                                                                                        
                                                                                        // Add remove functionality
                                                                                        item.querySelector('.remove-btn').addEventListener('click', function(e) {
                                                                                            e.stopPropagation();
                                                                                            const removeId = this.getAttribute('data-id');
                                                                                            const cardToDeselect = document.querySelector(`.embroidery-card[data-id="${removeId}"]`);
                                                                                            if (cardToDeselect) {
                                                                                                cardToDeselect.classList.remove('selected');
                                                                                                cardToDeselect.style.borderColor = '#ddd';
                                                                                                cardToDeselect.style.boxShadow = 'none';
                                                                                                cardToDeselect.querySelector('.embroidery-checkbox').style.display = 'none';
                                                                                            }
                                                                                            
                                                                                            const index = selectedEmbroideryIds.indexOf(removeId);
                                                                                            if (index > -1) {
                                                                                                selectedEmbroideryIds.splice(index, 1);
                                                                                            }
                                                                                            calculateEmbroideryTotalPrice();
                                                                                        });
                                                                                    }
                                                                                });
                                                                                
                                                                                // Show total embroidery price
                                                                                const totalItem = document.createElement('div');
                                                                                totalItem.style.marginTop = '10px';
                                                                                totalItem.style.fontWeight = 'bold';
                                                                                totalItem.style.color = '#194afb';
                                                                                totalItem.textContent = `Total Embroidery: ‡ß≥${embroideryTotalPrice.toFixed(2)}`;
                                                                                selectedEmbroideryList.appendChild(totalItem);
                                                                                
                                                                            } else {
                                                                                // Show "None" when no designs selected
                                                                                clearEmbroideryBtn.style.display = 'none';
                                                                                selectedEmbroideryList.innerHTML = '<span style="color: #666; font-style: italic;">None</span>';
                                                                                selectedEmbroideryIds = []; // Ensure it's empty
                                                                            }
                                                                        }
                                                                        
                                                                        // Clear all embroidery selections
                                                                        if (clearEmbroideryBtn) {
                                                                            clearEmbroideryBtn.addEventListener('click', function() {
                                                                                // Deselect all cards
                                                                                embroideryCards.forEach(card => {
                                                                                    card.classList.remove('selected');
                                                                                    card.style.borderColor = '#ddd';
                                                                                    card.style.boxShadow = 'none';
                                                                                    card.querySelector('.embroidery-checkbox').style.display = 'none';
                                                                                });
                                                                                
                                                                                // Clear selected IDs and price
                                                                                selectedEmbroideryIds = [];
                                                                                embroideryTotalPrice = 0;
                                                                                
                                                                                // Update hidden fields
                                                                                document.getElementById('selectedEmbroideryIds').value = '';
                                                                                document.getElementById('embroideryTotalPrice').value = '0';
                                                                                
                                                                                // Update display
                                                                                updateEmbroiderySelectionDisplay();
                                                                            });
                                                                        }
                                                                        
                                                                        // Initialize display
                                                                        calculateEmbroideryTotalPrice();
                                                                    });
                                                                </script>




                                                                <div style="margin-bottom: 15px;">
                                                                    <label style="display: block; font-weight: 600; margin-bottom: 6px; color: #333;">Delivery Information</label>
                                                                    <div style="background: #f8f9fa; padding: 12px; border-radius: 5px; border: 1px solid #e9ecef;">
                                                                        <p style="margin: 0; color: #28a745; font-weight: 500;">
                                                                            <i class="fas fa-shipping-fast" style="margin-right: 8px;"></i>
                                                                            Your order will be delivered within 21 working days
                                                                        </p>
                                                                        <p style="margin: 5px 0 0 0; font-size: 14px; color: #666;">
                                                                            Estimated delivery: <strong id="estimatedDeliveryDate"></strong>
                                                                        </p>

                                                                        <script>
                                                                        document.addEventListener('DOMContentLoaded', function() {
                                                                            function calculateEstimatedDelivery() {
                                                                                const today = new Date();
                                                                                
                                                                                // Add 21 days
                                                                                const deliveryDate = new Date(today);
                                                                                deliveryDate.setDate(deliveryDate.getDate() + 21);
                                                                                
                                                                                // Format the date as "Month Day, Year"
                                                                                const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                                                                                            'July', 'August', 'September', 'October', 'November', 'December'];
                                                                                
                                                                                const month = months[deliveryDate.getMonth()];
                                                                                const day = deliveryDate.getDate();
                                                                                const year = deliveryDate.getFullYear();
                                                                                
                                                                                const formattedDate = `${month} ${day}, ${year}`;
                                                                                
                                                                                // Display the date
                                                                                document.getElementById('estimatedDeliveryDate').textContent = formattedDate;
                                                                            }
                                                                            
                                                                            // Calculate and display on page load
                                                                            calculateEstimatedDelivery();
                                                                        });
                                                                        </script>
                                                                    </div>
                                                                    <input type="hidden" name="delivery_date" value="{{ estimated_delivery_date|date:'Y-m-d' }}">
                                                                </div>
                                                                
                                                                
                                                                <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                                                                    <button type="button" class="prev-step" style="padding: 8px 20px; background-color: #f0f0f0; color: #333; border: none; border-radius: 5px; cursor: pointer;">Previous</button>
                                                                    <button type="submit" style="padding: 8px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">Submit Order</button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                        
                                                        <style>
                                                            .step-circle {
                                                                width: 30px;
                                                                height: 30px;
                                                                border-radius: 50%;
                                                                background-color: #ddd;
                                                                color: #666;
                                                                display: flex;
                                                                align-items: center;
                                                                justify-content: center;
                                                                font-weight: bold;
                                                            }
                                                            
                                                            .step-circle.active {
                                                                background-color: #194afb;
                                                                color: white;
                                                            }
                                                            
                                                            .step-line {
                                                                width: 40px;
                                                                height: 2px;
                                                                background-color: #ddd;
                                                            }
                                                            
                                                            .form-step {
                                                                display: none;
                                                            }
                                                            
                                                            .form-step.active {
                                                                display: block;
                                                            }
                                                        </style>
                                                        
                                                        <script>
                                                            // Step navigation elements
                                                            let steps, stepCircles;

                                                            // Show step function (global)
                                                            function showStep(stepNumber) {
                                                                steps.forEach(step => {
                                                                    step.classList.remove('active');
                                                                    if (parseInt(step.dataset.step) === stepNumber) {
                                                                        step.classList.add('active');
                                                                    }
                                                                });

                                                                stepCircles.forEach(circle => {
                                                                    circle.classList.remove('active');
                                                                    if (parseInt(circle.dataset.step) <= stepNumber) {
                                                                        circle.classList.add('active');
                                                                    }
                                                                });
                                                            }

                                                            function openCustomOrderModal(tailorId) {
                                                                const modal = document.getElementById("customOrderModal");
                                                                modal.style.display = "flex";
                                                                
                                                                // Set the form action dynamically
                                                                document.getElementById("hireForm").action = `/create-custom-orders/${tailorId}/`;
                                                                
                                                                showStep(1); // Start at step 1
                                                            }

                                                            // Modal close functionality
                                                            document.getElementById("closeCustomOrderModal").addEventListener("click", () => {
                                                                document.getElementById("customOrderModal").style.display = "none";
                                                            });

                                                            // View Profile modal functionality
                                                            document.querySelectorAll(".open-modal-btn").forEach(button => {
                                                                button.addEventListener("click", function () {
                                                                    // Show the modal
                                                                    document.getElementById("hireModal").style.display = "flex";
                                                                    // Set tailor info
                                                                    document.getElementById("tailorImage").src = this.dataset.image;
                                                                    document.getElementById("tailorName").textContent = this.dataset.name;
                                                                    document.getElementById("tailorshopname").textContent = this.dataset.shop;
                                                                    document.getElementById("tailorExpertise").textContent = this.dataset.expertise;
                                                                    document.getElementById("tailorLocation").textContent = this.dataset.location;
                                                                    document.getElementById("tailorRating").textContent = "‚≠ê " + this.dataset.rating;
                                                                    document.getElementById("modalTitle").textContent = "Order " + this.dataset.name;
                                                                    // Set form action
                                                                    document.getElementById("hireForm").action = this.dataset.url;
                                                                    
                                                                });
                                                            });

                                                            // Modal close functionality
                                                            document.getElementById("closeModal").addEventListener("click", () => {
                                                                document.getElementById("hireModal").style.display = "none";
                                                            });

                                                            // Click outside to close modals
                                                            window.addEventListener("click", function (e) {
                                                                if (e.target.id === "customOrderModal") {
                                                                    document.getElementById("customOrderModal").style.display = "none";
                                                                }
                                                                if (e.target.id === "hireModal") {
                                                                    document.getElementById("hireModal").style.display = "none";
                                                                }
                                                            });

                                                            // Step navigation functionality
                                                            document.addEventListener('DOMContentLoaded', function() {
                                                                steps = document.querySelectorAll('.form-step');
                                                                stepCircles = document.querySelectorAll('.step-circle');

                                                                // Next button click handler
                                                                document.querySelectorAll('.next-step').forEach(button => {
                                                                    button.addEventListener('click', function() {
                                                                        const currentStep = document.querySelector('.form-step.active');
                                                                        const nextStep = parseInt(currentStep.dataset.step) + 1;
                                                                        if (nextStep <= steps.length) {
                                                                            showStep(nextStep);
                                                                        }
                                                                    });
                                                                });

                                                                // Previous button click handler
                                                                document.querySelectorAll('.prev-step').forEach(button => {
                                                                    button.addEventListener('click', function() {
                                                                        const currentStep = document.querySelector('.form-step.active');
                                                                        const prevStep = parseInt(currentStep.dataset.step) - 1;
                                                                        if (prevStep >= 1) {
                                                                            showStep(prevStep);
                                                                        }
                                                                    });
                                                                });
                                                            });
                                                        </script>

                                            </div>
                                        </div>
                                        

                                    </div>
                            </div>

                                    
                                    {% else %}
                                        <a href="{% url 'user_login' %}" style="display: inline-block; margin-top: 10px; padding: 8px 16px; background-color: #e74c3c; color: white; text-decoration: none; border-radius: 5px;">Login to view profile</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endif%}
                {% empty %}
                    
                {% endfor %}

                <!-- Additional CSS for Hover Effect and Slideshow -->
                <style>
                    .cover-slider-container:hover .cover-slider {
                        animation: slide 20s infinite;
                    }

                    .cover-slider-container {
                        cursor: pointer;
                    }

                    /* Animation to cycle through the images */
                    @keyframes slide {
                        0% { transform: translateX(0); }
                        25% { transform: translateX(-100%); }
                        50% { transform: translateX(-200%); }
                        75% { transform: translateX(-300%); }
                        100% { transform: translateX(-400%); }
                    }
                </style>

                <!-- Optional JavaScript for Hover Interaction -->
                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                        document.querySelectorAll('.cover-slider-container').forEach(container => {
                            const slider = container.querySelector('.cover-slider');
                            if (!slider) return;
                            const slides = slider.children;
                            let currentIndex = 0;
                            let intervalId = null;

                            // Show first image always
                            slider.style.transform = 'translateX(0)';

                            container.addEventListener('mouseenter', function () {
                                if (intervalId) return;
                                intervalId = setInterval(() => {
                                    currentIndex = (currentIndex + 1) % slides.length;
                                    slider.style.transform = `translateX(-${currentIndex * 100}%)`;
                                }, 2000);
                            });

                            container.addEventListener('mouseleave', function () {
                                clearInterval(intervalId);
                                intervalId = null;
                                currentIndex = 0;
                                slider.style.transform = 'translateX(0)';
                            });
                        });
                    });
                </script>
        </section>



  <!-- ===================  HOW TO WORK SECTION  =================== -->
        <hr style="border: 0.5px solid gray; margin: 20px auto; width: 100%;">
        <section style="padding: 60px 5%; background-color: #f9fafb; font-family: 'Segoe UI', sans-serif;">
            <img src="{% static 'images/13.png' %}" alt="" style="width: 100%; max-width: 1400px; display: block;  border-radius: 12px;">
        </section>    

        <!-- Call to Action Section -->
        <section style="background-color: #f8fafc; padding: 60px 20px; text-align: center; font-family: Arial, sans-serif;">
            <div style="max-width: 800px; margin: 0 auto;">
                <h2 style="font-size: 32px; color: #333; margin-bottom: 20px;">Ready to Get Started?</h2>
                <p style="font-size: 18px; color: #666; line-height: 1.6; margin-bottom: 30px;">
                    Join thousands of satisfied customers who have found their perfect tailor through Dorzi. 
                    Experience quality tailoring with complete transparency and convenience.
                </p>
                
                <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                    <a href="{% url 'findTailor' %}" 
                    style="background-color: #2563eb; color: white; padding: 12px 24px; 
                            text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px;
                            transition: all 0.3s ease;
                            display: inline-block;
                            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.2);"
                    onmouseover="this.style.backgroundColor='#1d4ed8'; this.style.boxShadow='0 4px 8px rgba(37, 99, 235, 0.3)';" 
                    onmouseout="this.style.backgroundColor='#2563eb'; this.style.boxShadow='0 2px 4px rgba(37, 99, 235, 0.2)';">
                    Find a Tailor
                    </a>

                    <a href="{% url 'tailor_signup' %}" 
                    style="background-color: white; color: #2563eb; padding: 12px 24px; 
                            text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px;
                            border: 2px solid #2563eb; transition: all 0.3s ease;
                            display: inline-block;
                            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.1);"
                    onmouseover="this.style.backgroundColor='#f0f5ff'; this.style.color='#1d4ed8'; this.style.borderColor='#1d4ed8'; this.style.boxShadow='0 4px 8px rgba(37, 99, 235, 0.2)';" 
                    onmouseout="this.style.backgroundColor='white'; this.style.color='#2563eb'; this.style.borderColor='#2563eb'; this.style.boxShadow='0 2px 4px rgba(37, 99, 235, 0.1)';">
                    Join as Tailor
                    </a>
                </div>
            </div>
        </section>
</main>

{% endblock %}
